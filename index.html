<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalyan Pro - Login</title>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; text-align: center; padding: 30px 15px; display: flex; flex-direction: column; justify-content: center; min-height: 90vh; }
        .logo { font-size: 32px; font-weight: bold; color: gold; margin-bottom: 20px; }
        .form-box { background: #1a1a1a; padding: 25px; border-radius: 15px; border: 1px solid #333; }
        input { width: 90%; padding: 12px; margin: 10px 0; background: #222; border: 1px solid #444; color: #fff; border-radius: 8px; font-size: 16px; outline: none; }
        .btn { background: gold; color: #000; padding: 15px; width: 100%; border: none; border-radius: 8px; font-weight: bold; font-size: 18px; cursor: pointer; margin-top: 15px; }
        .bonus-tag { color: #0f0; font-size: 14px; font-weight: bold; margin-bottom: 10px; }
        #otp-section { display: none; }
    </style>
</head>
<body>

    <div class="logo">KALYAN <span style="color:white;">PRO</span></div>
    <div class="form-box">
        <div class="bonus-tag">üéÅ SIGNUP BONUS: ‚Çπ51 FREE</div>
        <div id="login-section">
            <input type="tel" id="phone" placeholder="Mobile Number" maxlength="10">
            <button class="btn" onclick="sendOTP()">SEND OTP</button>
        </div>
        <div id="otp-section">
            <p>OTP sent to <span id="show-phone" style="color:gold"></span></p>
            <input type="number" id="otp-input" placeholder="Enter 6-Digit OTP">
            <button class="btn" onclick="verifyOTP()">VERIFY & PLAY</button>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCy2zsDDJeVTQEbHCenkLIlz3lWWyo-Pqo",
            databaseURL: "https://kalyan-casino-default-rtdb.firebaseio.com",
            projectId: "kalyan-casino"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function sendOTP() {
            const phone = document.getElementById('phone').value;
            if(phone.length < 10) { alert("Sahi number daalo!"); return; }
            document.getElementById('show-phone').innerText = phone;
            document.getElementById('login-section').style.display = "none";
            document.getElementById('otp-section').style.display = "block";
            console.log("OTP: 123456");
        }

        function verifyOTP() {
            const phone = document.getElementById('phone').value;
            const otp = document.getElementById('otp-input').value;
            if(otp === "123456") {
                db.ref('users/' + phone).once('value', (snap) => {
                    if(!snap.exists()) {
                        db.ref('users/' + phone).set({ phone: phone, wallet: 51, joinedAt: Date.now() })
                        .then(() => loginSuccess(phone));
                    } else { loginSuccess(phone); }
                });
            } else { alert("Wrong OTP!"); }
        }

        function loginSuccess(phone) {
            localStorage.setItem('userPhone', phone);
            window.location.href = "game.html";
        }
    </script>
</body>
</html>
