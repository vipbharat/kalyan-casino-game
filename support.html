<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support - Kalyan Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background: #0b0b0b; color: #fff; font-family: sans-serif; margin: 0; padding: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        /* Header */
        .header { background: #1a1a1a; padding: 15px; display: flex; align-items: center; border-bottom: 1px solid #333; box-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        .back-btn { color: gold; text-decoration: none; font-size: 20px; margin-right: 15px; }
        .brand-name { font-weight: bold; color: gold; font-size: 18px; }
        .online-status { font-size: 10px; color: #28a745; display: block; margin-top: 2px; }

        /* Chat Area */
        .chat-container { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; background: #000; }
        .msg { max-width: 85%; padding: 12px 15px; border-radius: 18px; font-size: 14px; line-height: 1.5; position: relative; }
        .bot { background: #222; color: #eee; align-self: flex-start; border-bottom-left-radius: 2px; border: 1px solid #333; }
        .user { background: gold; color: #000; align-self: flex-end; border-bottom-right-radius: 2px; font-weight: 500; }

        /* Support Buttons */
        .admin-links { padding: 15px; background: #111; border-top: 1px solid #222; }
        .support-btn { display: flex; align-items: center; justify-content: center; gap: 12px; padding: 14px; border-radius: 10px; text-decoration: none; font-weight: bold; margin-bottom: 10px; font-size: 15px; transition: 0.3s; }
        .support-btn:active { transform: scale(0.95); }
        .wa-btn { background: #25D366; color: white; box-shadow: 0 4px 10px rgba(37, 211, 102, 0.2); }
        .tg-btn { background: #0088cc; color: white; box-shadow: 0 4px 10px rgba(0, 136, 204, 0.2); }

        /* Input Area */
        .input-area { display: flex; padding: 15px; background: #1a1a1a; gap: 10px; border-top: 1px solid #333; }
        #userInput { flex: 1; background: #000; border: 1px solid #444; color: #fff; padding: 12px; border-radius: 25px; outline: none; padding-left: 20px; }
        .send-btn { background: gold; color: #000; border: none; width: 45px; height: 45px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px; }
    </style>
</head>
<body>

    <div class="header">
        <a href="dashboard.html" class="back-btn"><i class="fa-solid fa-arrow-left"></i></a>
        <div>
            <div class="brand-name">Kalyan Pro Support</div>
            <span class="online-status">‚óè Online (Reply in 1 min)</span>
        </div>
    </div>

    <div class="chat-container" id="chatBox">
        <div class="msg bot">
            Welcome to **Kalyan Pro** Support! üëã<br>
            Aapki help ke liye hum tayyar hain. Deposit/Withdrawal se judi kisi bhi problem ke liye niche diye gaye Official Links par click karein.
        </div>
    </div>

    <div class="admin-links">
        <a id="whatsapp-link" href="#" target="_blank" class="support-btn wa-btn">
            <i class="fa-brands fa-whatsapp fa-lg"></i> Official WhatsApp Help
        </a>
        <a id="telegram-link" href="#" target="_blank" class="support-btn tg-btn">
            <i class="fa-brands fa-telegram fa-lg"></i> Official Telegram Channel
        </a>
    </div>

    <div class="input-area">
        <input type="text" id="userInput" placeholder="Kuch poochhna chahte hain?">
        <button class="send-btn" onclick="sendMessage()"><i class="fa-solid fa-paper-plane"></i></button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCy2zsDDJeVTQEbHCenkLIlz3lWWyo-Pqo",
            databaseURL: "https://kalyan-casino-default-rtdb.firebaseio.com",
            projectId: "kalyan-casino"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // --- MASTER ADMIN CONNECTION ---
        // Admin Settings Se Links Load Karna (Path Fixed)
        db.ref('admin_settings/support').on('value', (snap) => {
            const data = snap.val();
            if(data) {
                // WhatsApp Number (with 91 check)
                let wa = data.whatsapp;
                document.getElementById('whatsapp-link').href = "https://wa.me/" + wa;
                
                // Telegram Link
                document.getElementById('telegram-link').href = data.telegram;
            }
        });

        function sendMessage() {
            const input = document.getElementById('userInput');
            const chatBox = document.getElementById('chatBox');
            if(input.value.trim() === "") return;

            // User ka message dikhana
            const userMsg = document.createElement('div');
            userMsg.className = "msg user";
            userMsg.innerText = input.value;
            chatBox.appendChild(userMsg);

            // Auto Admin-style Response
            setTimeout(() => {
                const botMsg = document.createElement('div');
                botMsg.className = "msg bot";
                botMsg.innerHTML = "Aapka message mil gaya hai! Hamare support executive se turant baat karne ke liye upar diye gaye **WhatsApp** button par click karein.";
                chatBox.appendChild(botMsg);
                chatBox.scrollTop = chatBox.scrollHeight;
            }, 800);

            input.value = "";
            chatBox.scrollTop = chatBox.scrollHeight;
        }
    </script>
</body>
</html>
